{% from 'smart/icons.html' import icon_small %} {% extends "smart/base.html" %}
{% block title %}{% if query_in_title %} - {{ q|e }}{% endif %}{% endblock %} {%
block body %} {% include 'smart/madules/search_header.html' %}
<div class="links">
    <a href="" class="link">{{icon_small('donate')}}</a>
    {% include 'smart/madules/sidebar_btn.html' %}
</div>
<div
    class="results-container {% if results and results|map(attribute='template')|unique|list|count and 'images.html' in results|map(attribute='template')|unique|list %} image-page {% if results|map(attribute='template')|unique|list|count > 1 %} multiple-results {% endif %} {% endif %}"
>
    {% if pageno <= 1 %} {% if results and
    results|map(attribute='template')|unique|list|count == 1 and
    selected_categories|count == 1 and 'general' in selected_categories %}
    <p class="error js-alt">
        {{_('Jabir needs JS enabled to work properly.')}}
    </p>
    <div
        class="message-container js-only ai loading"
        id="ai-message-container"
        data-gitee-based-on="{{ _('Based on') }}"
    >
        <div class="title">
            {{ icon_small('ai') }}
            <h3>{{ _('Answer by Jabir') }}</h3>
        </div>
        <div class="load-container">
            <div class="loading-indecators">
                <span class="indecator"> </span>
                <span class="indecator"> </span>
                <span class="indecator"> </span>
            </div>
            <button class="btn stop">
                <span>{{ _('Stop') }}</span> {{ icon_small('stop') }}
            </button>
        </div>
        <form class="send-message" id="send-message">
            <input
                type="text"
                placeholder="{{ _('Ask Jabir anything...') }}"
                value="{{ q|e }}"
                dir="auto"
            />
            <button>{{ icon_small('send') }}</button>
        </form>
    </div>
    {% endif %} {% if answers %}
    <div class="message-container">
        <div class="title">
            {{ icon_small('plugin') }}
            <h3>{{ _('Answers by Plugins and Engines') }}</h3>
        </div>
        {%- for answer in answers -%}
        <div class="message-box">
            {% if answer.template != "answer/legacy.html" %} {%- include
            ("simple/" + (answer.template)) -%} {% else %}
            <p class="message" dir="auto">{{ answer.answer }}</p>
            {%- if answer.url -%}
            <div class="reference">
                {{ _('Based on') }}
                <a
                    href="{{ answer.url }}"
                    {%-
                    if
                    results_on_new_tab
                    %}target="_blank"
                    rel="noopener noreferrer"
                    {%-
                    else
                    -%}rel="noreferrer"
                    {%-
                    endif
                    -%}
                    >{{ urlparse(answer.url).hostname }}</a
                >
            </div>
            {% endif %} {% endif %}
        </div>
        {%- endfor -%}
    </div>
    {% endif %} {% endif %} {% if results %}{% for result in results %} {% if
    result.open_group and not is_image_page %}
    <div
        class="{{ result['template']|replace('.html', '') }}_group result-group"
    >
        {% endif %} {% set template = get_result_template('smart',
        result['template']) if 'smart' in get_result_template('smart',
        result['template']) else get_result_template('smart', 'default.html') %}
        {% include template %} {% if result.close_group and not is_image_page %}
    </div>
    {% endif %} {% endfor %} {% endif %} {% include
    'smart/madules/pagination.html' %}
</div>
<div class="info-panel">
    {% if infoboxes %} {% include 'smart/madules/infoboxs.html' %} {% endif %}
</div>
{%- if number_of_results != '0' -%}
<div class="result-count">
    <div class="result-count-container">
        <small>{{ _('Number of results') }}: {{ number_of_results }}</small>
        <button
            id="share-url-btn"
            class="share_btn center-tooltip"
            role="button"
            data-search-url="
        {{ url_for('search', _external=True) }}?q={{ q|urlencode }}&amp;language={{ current_language }}&amp;time_range={{ time_range }}&amp;safesearch={{ safesearch }}
            {%- if pageno > 1 -%}
              &amp;pageno={{ pageno }}
            {%- endif -%}
            {%- if selected_categories -%}
              &amp;categories={{ selected_categories|join(',') | replace(' ','+') }}
            {%- endif -%}
            {%- if timeout_limit -%}
              &amp;timeout_limit={{ timeout_limit|urlencode }}
            {%- endif -%}"
            data-gitee-copied="{{ _('Copied') }}"
        >
            {{ icon_small('share') }}
        </button>
    </div>
</div>
{%- endif -%} {% if 'images.html' in
results|map(attribute='template')|unique|list%}
<div class="image-details-container">
    <div class="image-details" id="image-details">
        <img src=".." alt=".." id="image-src" />
        <div class="actions">
            <a
                href="..."
                class="btn primary"
                download="image.png"
                id="image-download"
            >
                Download
            </a>
            <button class="btn copy" id="image-copy">Copy</button>
        </div>
        <div class="detail-info">
            <div class="close">{{ icon_small('close') }}</div>
            <h3 id="image-title">...</h3>
            <p class="description" id="image-content">...</p>
            <div class="meta">
                <div class="meta-item" id="image-format">
                    <span class="label">{{ _('Format') }}:</span>
                    <span class="value">...</span>
                </div>
                <div class="meta-item" id="image-filesize">
                    <span class="label">{{ _('Filesize') }}:</span>
                    <span class="value">...</span>
                </div>

                <a
                    href="..."
                    class="source"
                    id="image-source"
                    {%
                    if
                    results_on_new_tab
                    %}target="_blank"
                    rel="noopener noreferrer"
                    {%
                    else
                    %}rel="noreferrer"
                    {%
                    endif
                    %}
                >
                    {{ _('View source') }}
                </a>
            </div>
            <p class="engine">
                {{ _('Engine') }}
                <span class="engine-name" id="image-engine"></span>
            </p>
        </div>
    </div>
</div>
{% endif %} {% include 'smart/footer.html' %} {% endblock %}
